<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>RigNavi MVP</title>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<style>
  :root{
    --bg1:#eff9ff; --bg2:#e9f5ff;
    --ink:#0b2531; --muted:#5a7b8c;
    --glass:#ffffffc9; --line:#d8e9f3;
    --card:#ffffff; --chip:#f4faff;
    --accent:#12b6ff; --accent-ink:#013449;
    --ok:#10b981;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;color:var(--ink);font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:linear-gradient(180deg,var(--bg1),var(--bg2))}
  header{position:sticky;top:0;z-index:10;display:flex;align-items:center;justify-content:space-between;padding:14px 18px;backdrop-filter:saturate(140%) blur(10px);background:var(--glass);border-bottom:1px solid var(--line)}
  .brand{font-weight:800;letter-spacing:.1px;display:flex;gap:8px;align-items:center}
  .brand i{font-style:normal;font-size:18px}
  .badge{background:#d6f4ff;color:#067;padding:6px 10px;border-radius:999px;font-size:12px}
  main{max-width:980px;margin:0 auto;padding:16px}
  #hello{margin:4px 0 16px;color:var(--muted)}
  .steps{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
  .step{border:1px solid var(--line);background:var(--chip);color:var(--muted);border-radius:12px;padding:8px 12px;font-size:13px}
  .step.on{border-color:#bfe9ff;color:#0a4c63;background:#e8f8ff;font-weight:700}
  #back{appearance:none;border:1px solid var(--line);background:#fff;color:var(--ink);padding:10px 14px;border-radius:10px}
  #back[hidden]{display:none}
  .grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(240px,1fr))}
  .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px;box-shadow:0 10px 22px rgba(23,70,96,.08)}
  h1,h2,h3{margin:.2em 0 .5em} h1{font-size:26px} h3{font-size:18px}
  .muted{color:var(--muted)}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .chips{display:flex;flex-wrap:wrap;gap:10px;margin-top:8px}
  .chip,button{appearance:none;border:none;cursor:pointer;border-radius:12px;padding:12px 14px;font-size:15px}
  .chip{background:var(--chip)}
  button.pri{background:var(--accent);color:var(--accent-ink);font-weight:800}
  button.ghost{background:#fff;border:1px solid var(--line)}
  a{color:#007fb3}
  ul.items{padding-left:18px;margin:8px 0} ul.items li{margin:10px 0}
  .kv{display:flex;gap:10px;flex-wrap:wrap;margin:.6rem 0}
  .kv span{background:#f6fbff;border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-size:12px}
  .hero{background:linear-gradient(135deg,#e8f7ff,#ffffff);border:1px dashed var(--line);border-radius:16px;padding:12px;margin-bottom:12px}
  .banner{width:100%;border-radius:14px;border:1px solid var(--line);display:block}
  .shops{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
  .shop{padding:8px 10px;border-radius:10px;background:#fff;border:1px solid var(--line);font-size:14px}
  .cap{font-size:13px;color:var(--muted);margin:4px 0 8px}
  .sectionTitle{margin-top:12px;margin-bottom:6px;font-weight:800}
  .params{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 10px}
  .param{display:inline-flex;align-items:center;gap:6px;background:#fff;border:1px solid var(--line);padding:8px 10px;border-radius:999px;font-size:13px}
  .param b{font-weight:800;color:#055}
  .method-chips .chip.on{background:#e8f8ff;border:1px solid #bfe9ff;font-weight:700}
  .memo{font-size:13px;color:#174656;background:#f6fbff;border:1px solid var(--line);border-radius:10px;padding:8px 10px;margin-top:8px}
</style>
</head>
<body>
<header>
  <div class="brand"><i>ğŸ£</i>RigNavi</div>
  <div class="badge">MVP</div>
</header>

<main>
  <div id="hello">èµ·å‹•ä¸­â€¦</div>

  <div class="row" style="justify-content:space-between">
    <div class="steps" id="steps"></div>
    <button id="back" class="ghost" hidden onclick="goBack()">æˆ»ã‚‹</button>
  </div>

  <div id="app"></div>
</main>

<script>
/* ===== åŸºæœ¬è¨­å®š ===== */
const LIFF_ID = "2008257307-RwPLYWG1";
const VERSION = "11";

/* ===== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ===== */
function toSlug(s){ return (s||'').toString().toLowerCase().replace(/[^\wã-ã‚“ã‚¡-ãƒ³ä¸€-é¾¯ãƒ¼]+/g,'-'); }
function q(s){ return encodeURIComponent(s); }
function linkAmazon(keyword){ return `https://www.amazon.co.jp/s?k=${q(keyword)}&tag=YOURID-22`; }
function linkRakuten(keyword){ return `https://search.rakuten.co.jp/search/mall/${q(keyword)}/?scid=af_pc_etc&icm_cid=YOUR_RAKUTEN_ID`; }

/* ===== é‡£æ³•â†’ä»£è¡¨ã‚®ã‚¢èªå½™ ===== */
const METHOD_GEAR = {
  "ã‚µãƒ“ã‚­":["ã‚µãƒ“ã‚­ ä»•æ›ã‘","ãƒˆãƒªãƒƒã‚¯ã‚µãƒ“ã‚­","ã‚µãƒ“ã‚­ç”¨ã‚«ã‚´"],
  "ãƒ­ã‚±ãƒƒãƒˆã‚µãƒ“ã‚­":["ãƒ­ã‚±ãƒƒãƒˆã‚«ã‚´ å¤©ç§¤","ã‚µãƒ“ã‚­ ä»•æ›ã‘"],
  "ã¡ã‚‡ã„æŠ•ã’":["ã¡ã‚‡ã„æŠ•ã’ ä»•æ›ã‘ 5å·","ãƒŠã‚¹å‹ã‚ªãƒ¢ãƒª 5ã€œ10å·"],
  "æŠ•ã’":["æŠ•ã’é‡£ã‚Š ä»•æ›ã‘ å¤©ç§¤","ã‚¸ã‚§ãƒƒãƒˆå¤©ç§¤ 15ã€œ25å·"],
  "é æŠ•ã‚«ã‚´":["é æŠ•ã‚«ã‚´ ä»•æ›ã‘","ã‚«ã‚´ ã‚¦ã‚­ ä»•æ›ã‘"],
  "ã‚¦ã‚­":["æ£’ã‚¦ã‚­ ä»•æ›ã‘","ã‚¦ã‚­æ­¢ã‚ ã‚´ãƒ "],
  "å°ã‚¦ã‚­":["å°å‹ ç‰ã‚¦ã‚­ 0.5ã€œ1å·","ã‚·ãƒ¢ãƒªç‰"],
  "ãƒ•ã‚«ã‚»":["ãƒ•ã‚«ã‚» ä»•æ›ã‘","é…åˆã‚¨ã‚µ ã‚ªã‚­ã‚¢ãƒŸ"],
  "ãƒŸãƒ£ã‚¯é‡£ã‚Š":["ãƒãƒªã‚¹ 0.6ã€œ1å·","ã‚¬ãƒ³ç‰ ã‚»ãƒƒãƒˆ"],
  "èƒ´çªã":["èƒ´çªã ä»•æ›ã‘","ã‚ªãƒ¢ãƒª 8ã€œ15å·"],
  "ãƒ–ãƒ©ã‚¯ãƒª":["ãƒ–ãƒ©ã‚¯ãƒª 5ã€œ8å·","æ ¹é­šãƒ¯ãƒ¼ãƒ "],
  "ãƒ˜ãƒãƒ»è½ã¨ã—è¾¼ã¿":["ãƒ˜ãƒ ä»•æ›ã‘","ã‚¬ãƒ³ç‰","è½ã¨ã—è¾¼ã¿ ç«¿"],
  "ã¶ã£ã“ã¿":["ã¶ã£ã“ã¿ ä»•æ›ã‘ å¤œå…‰éˆ´","ã‚¸ã‚§ãƒƒãƒˆå¤©ç§¤ 25å·"],
  "ãƒ«ã‚¢ãƒ¼":["ãƒŸãƒãƒ¼ 9ã€œ12cm","ãƒã‚¤ãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ 14ã€œ26g","ãƒ¡ã‚¿ãƒ«ã‚¸ã‚° 20ã€œ40g"],
  "ãƒ«ã‚¢ãƒ¼(è»½é‡)":["ã‚¢ã‚¸ãƒ³ã‚° ã‚¸ã‚°ãƒ˜ãƒƒãƒ‰ 1g","æ¥µå°ãƒ¯ãƒ¼ãƒ "],
  "ã‚¸ã‚®ãƒ³ã‚°":["ãƒ¡ã‚¿ãƒ«ã‚¸ã‚° 40ã€œ60g","ã‚¢ã‚·ã‚¹ãƒˆãƒ•ãƒƒã‚¯"],
  "ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼":["ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ ä»•æ›ã‘","æ´»ã‹ã—ãƒãƒƒã‚«ãƒ³ ã‚¨ã‚¢ãƒãƒ³ãƒ—"],
  "ã‚¨ã‚®ãƒ³ã‚°":["ã‚¨ã‚® 2.5ã€œ3.5å·","ã‚¨ã‚®ã‚¹ãƒŠãƒƒãƒ—"],
  "ãƒ†ãƒ³ãƒ¤":["ãƒ†ãƒ³ãƒ¤ å¤ªåˆ€é­š","ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒªãƒ¼ãƒ€ãƒ¼"],
  "ãƒ¯ã‚¤ãƒ³ãƒ‰":["å¤ªåˆ€é­š ãƒ¯ã‚¤ãƒ³ãƒ‰ ã‚»ãƒƒãƒˆ","ãƒ¯ã‚¤ãƒ³ãƒ‰ ãƒ˜ãƒƒãƒ‰"],
  "ãƒã‚¼ã‚¯ãƒ©":["ãƒã‚¼ ã‚¯ãƒ©ãƒ³ã‚¯","æ¥µå°ã‚¹ãƒŠãƒƒãƒ—"]
};

/* ===== é‡£æ³•â†’é¤Œ/æ’’ãé¤Œ ===== */
const BAIT_BY_METHOD = {
  "ã‚µãƒ“ã‚­":["ã‚¢ãƒŸã‚¨ãƒ“ å¸¸æ¸©ï¼ˆã‚¢ãƒŸå§«ï¼‰","ã‚³ãƒã‚»ã‚¹ãƒ—ãƒ¼ãƒ³"],
  "ãƒ­ã‚±ãƒƒãƒˆã‚µãƒ“ã‚­":["ãƒ­ã‚±ãƒƒãƒˆã‚«ã‚´","ã‚¢ãƒŸã‚¨ãƒ“"],
  "ãƒ•ã‚«ã‚»":["ã‚ªã‚­ã‚¢ãƒŸ","é…åˆã‚¨ã‚µ ã‚°ãƒ¬ç”¨ç­‰"],
  "ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼":["æ´»ã‚¢ã‚¸/å°é­š","æ´»ã‹ã—ãƒã‚±ãƒ„"],
  "èƒ´çªã":["é’ã‚¤ã‚½ãƒ¡","ã‚¤ã‚«çŸ­å†Š"],
  "ã¶ã£ã“ã¿":["é’ã‚¤ã‚½ãƒ¡æŸ","å¤œå…‰éˆ´"],
  "ãƒŸãƒ£ã‚¯é‡£ã‚Š":["ã‚¬ãƒ³ç‰","å°é‡ 6ã€œ7å·"],
  "ã‚¦ã‚­":["ã‚¦ã‚­æ­¢ã‚ç³¸","å¤œå…‰ã‚¦ã‚­"],
  "å°ã‚¦ã‚­":["å°ç‰ã‚¦ã‚­","ã‚·ãƒ¢ãƒªç‰"],
  "ãƒ†ãƒ³ãƒ¤":["ã‚­ãƒ“ãƒŠã‚´","ã‚µãƒ³ãƒåˆ‡ã‚Šèº«"],
  "ãƒ¯ã‚¤ãƒ³ãƒ‰":["å¤ªåˆ€é­šãƒ¯ã‚¤ãƒ³ãƒ‰ãƒ¯ãƒ¼ãƒ "],
  "ãƒã‚¼ã‚¯ãƒ©":["å°å‹ã‚¯ãƒ©ãƒ³ã‚¯","æ¥µå°ã‚¹ãƒŠãƒƒãƒ—"]
};

/* ===== ç”»åƒï¼ˆä»®ï¼‰ ===== */
const FISH_IMG_FALLBACK = "https://images.unsplash.com/photo-1504674900247-0877df9cc836?q=80&w=1200&auto=format&fit=crop";
function fishImg(f){ return `img/fish-${toSlug(f)}.png`; }
function rigImg(fish,method){
  const m = method||"";
  return {
    specific: `img/rig-${toSlug(fish)}-${toSlug(m)}.png`,
    generic:  `img/rig-${toSlug(m)}.png`,
    placeholder: "https://placehold.co/1200x600?text=Rig+Illustration"
  };
}

/* ===== é­šç¨®ãƒ‡ãƒ¼ã‚¿ï¼ˆå‰å›ã®ã¾ã¾ï¼‹å¤šæ•°ï¼‰ ===== */
const FISH_BOOK = {/* ã“ã“ã¯å‰å›é€ä»˜ã®å¤§è¾å…¸ãã®ã¾ã¾ï¼ˆçœç•¥ï¼‰ */};
/* çœç•¥ç‰ˆã‚’å…¥ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ç›´å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® FISH_BOOK ã‚’ãã®ã¾ã¾æ®‹ã—ã¦ãã ã•ã„ã€‚ */

/* â˜… é­šç¨®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼šè¡¨ç¤ºã¯ãã®ã¾ã¾ã€è§£èª¬ã¯åˆ¥åã«å¯„ã›ã‚‹ */
const FISH_ALIAS = {
  "ãƒã‚¼":"ãƒãƒã‚¼",
  "ã‚¢ãƒŠã‚´":"ãƒã‚¢ãƒŠã‚´",
  "ã‚³ãƒ":"ãƒã‚´ãƒ",
  "ã‚·ãƒ¼ãƒã‚¹":"ãƒ•ãƒƒã‚³"
};
function book(f){ return FISH_BOOK[FISH_ALIAS[f]||f] || {}; }

/* ===== ã‚«ãƒ†ã‚´ãƒªåˆ¥ï¼šå ´æ‰€ã§ä½¿ç”¨å¯ã«ã—ã¦ãŠãé‡£æ³•ãƒ—ãƒªã‚»ãƒƒãƒˆ ===== */
const M_BASE_GOGAN = ["ã‚µãƒ“ã‚­","ãƒ­ã‚±ãƒƒãƒˆã‚µãƒ“ã‚­","ã‚¦ã‚­","å°ã‚¦ã‚­","ã¡ã‚‡ã„æŠ•ã’","æŠ•ã’","ãƒŸãƒ£ã‚¯é‡£ã‚Š","èƒ´çªã","ãƒ–ãƒ©ã‚¯ãƒª","ãƒ˜ãƒãƒ»è½ã¨ã—è¾¼ã¿","ã¶ã£ã“ã¿","ãƒ•ã‚«ã‚»","ãƒ«ã‚¢ãƒ¼","ãƒ«ã‚¢ãƒ¼(è»½é‡)","ã‚¸ã‚®ãƒ³ã‚°","ãƒ†ãƒ³ãƒ¤","ãƒ¯ã‚¤ãƒ³ãƒ‰","ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼","ã‚¨ã‚®ãƒ³ã‚°"];
const M_BASE_RIVER = ["ã‚¦ã‚­","å°ã‚¦ã‚­","ãƒŸãƒ£ã‚¯é‡£ã‚Š","ã¡ã‚‡ã„æŠ•ã’","èƒ´çªã","ã¶ã£ã“ã¿","ãƒ˜ãƒãƒ»è½ã¨ã—è¾¼ã¿","ãƒ«ã‚¢ãƒ¼","ãƒ«ã‚¢ãƒ¼(è»½é‡)","ãƒ•ã‚«ã‚»"];
const M_BASE_ESTUARY = ["ã‚¦ã‚­","ã¡ã‚‡ã„æŠ•ã’","èƒ´çªã","ã¶ã£ã“ã¿","ãƒ˜ãƒãƒ»è½ã¨ã—è¾¼ã¿","ãƒ•ã‚«ã‚»","ãƒ«ã‚¢ãƒ¼","ãƒ«ã‚¢ãƒ¼(è»½é‡)","ã‚¸ã‚®ãƒ³ã‚°","ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼"];
const M_BASE_SURF = ["ã¡ã‚‡ã„æŠ•ã’","æŠ•ã’","ã¶ã£ã“ã¿","ãƒ«ã‚¢ãƒ¼","ã‚¸ã‚®ãƒ³ã‚°","ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼"];

/* ===== é‡£ã‚Šå ´DBï¼ˆæ±äº¬éƒ½ï¼šã”è¦æœ›åˆ†ã‚’è¿½åŠ ï¼‰ ===== */
const DB = [
  /* æ—¢å­˜ */
  { id:"wakasu", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"è‹¥æ´²æµ·æµœå…¬åœ’ï¼ˆæµ·é‡£ã‚Šæ–½è¨­ãƒ»äººå·¥ç£¯ï¼‰",
    address:"æ±Ÿæ±åŒºè‹¥æ´²3ä¸ç›®",
    map:"https://maps.google.com/?q=%E8%8B%A5%E6%B4%B2%E6%B5%B7%E6%BF%B1%E5%85%AC%E5%9C%92%20%E6%B5%B7%E9%87%A3%E3%82%8A%E6%96%BD%E8%A8%AD",
    zones:[
      {type:"å ¤é˜²", fishes:["ã‚¢ã‚¸","ã‚¤ã‚·ãƒ¢ãƒ","ã‚³ãƒã‚·ãƒ­","ãƒ¡ãƒãƒ«","ã‚«ã‚µã‚´","ã‚·ãƒ¼ãƒã‚¹","ã‚µãƒ","ã‚µãƒ¨ãƒª"]},
      {type:"ãƒ†ãƒˆãƒ©/äººå·¥ç£¯", fishes:["ã‚«ã‚µã‚´","ãƒ¡ãƒãƒ«","ã‚·ãƒ¼ãƒã‚¹"]}
    ],
    methods:M_BASE_GOGAN,
    memo:"æŸµãƒ»å£²åº—ãƒ»ãƒˆã‚¤ãƒ¬ã‚ã‚Šã€‚æ··é›‘å¤šã‚ï¼ãƒ©ã‚¤ã‚¸ãƒ£ã‚±æ¨å¥¨ã€‚"
  },
  { id:"toyosu-gururi", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"è±Šæ´²ãã‚‹ã‚Šå…¬åœ’ï¼ˆè­·å²¸ï¼‰",
    address:"æ±Ÿæ±åŒºè±Šæ´²6ä¸ç›®ã»ã‹",
    map:"https://maps.google.com/?q=%E8%B1%8A%E6%B4%B2%E3%81%90%E3%82%8B%E3%82%8A%E5%85%AC%E5%9C%92",
    zones:[ {type:"è­·å²¸", fishes:["ãƒã‚¼","ã‚·ãƒ¼ãƒã‚¹","ãƒ¡ãƒãƒ«","ã‚«ã‚µã‚´","ã‚¯ãƒ­ãƒ€ã‚¤","ã‚µãƒ¨ãƒª","ã‚³ãƒã‚·ãƒ­"]} ],
    methods:M_BASE_GOGAN,
    memo:"ç¦æ­¢åŒºç”»ã‚ã‚Šãƒ»æ’’ãé¤Œã‚„ãƒ­ã‚±ãƒƒãƒˆå¤©ç§¤ç¦æ­¢ï¼æ­©è¡Œè€…æœ€å„ªå…ˆã€‚"
  },
  { id:"ooi-nagisa", pref:"æ±äº¬éƒ½", city:"å“å·åŒº/å¤§ç”°åŒº", name:"å¤§äº•ãµé ­ä¸­å¤®æµ·æµœå…¬åœ’ï¼ˆãªãã•ã®æ£®ï¼šã—ãŠã˜ç£¯ ç­‰ï¼‰",
    address:"å“å·åŒºå…«æ½®4-2-1 å‘¨è¾º",
    map:"https://maps.google.com/?q=%E5%A4%A7%E4%BA%95%E3%81%B5%E9%A0%AD%E4%B8%AD%E5%A4%AE%E6%B5%B7%E6%B5%9C%E5%85%AC%E5%9C%92%20%E3%81%AA%E3%81%8E%E3%81%95%E3%81%AE%E6%A3%AE",
    zones:[ {type:"ç£¯çŠ¶è­·å²¸", fishes:["ãƒã‚¼","ã‚»ã‚¤ã‚´"]} ],
    methods:M_BASE_GOGAN,
    memo:"ç«‹å…¥ãƒ»é‡£ã‚Šç¦æ­¢åŒºç”»ã‚ã‚Šï¼æµ·ä¸Šå…¬åœ’ã¯æŠ•ã’åŸå‰‡ç¦æ­¢ï¼ˆã‚¢ãƒ³ãƒ€ãƒ¼æ¨å¥¨ï¼‰ã€‚"
  },

  /* è¿½åŠ ï¼šæ±äº¬ï½œè­·å²¸ / å ¤é˜² */
  { id:"keihin-tsubasa", pref:"æ±äº¬éƒ½", city:"å¤§ç”°åŒº", name:"äº¬æµœå³¶ã¤ã°ã•å…¬åœ’ï¼ˆç¬¬ä¸€ã€œç¬¬äºŒè­·å²¸ï¼‰",
    address:"å¤§ç”°åŒºäº¬æµœå³¶2ä¸ç›®",
    map:"https://www.google.com/maps?q=%E4%BA%AC%E6%B5%9C%E5%B3%B6%E3%81%A4%E3%81%B0%E3%81%95%E5%85%AC%E5%9C%92",
    zones:[ {type:"è­·å²¸", fishes:["ã‚·ãƒ¼ãƒã‚¹","ã‚«ãƒ¬ã‚¤","ãƒ¡ãƒãƒ«","ãƒã‚¼","ã‚µãƒ¨ãƒª"]} ],
    methods:M_BASE_GOGAN,
    memo:"æŸµã‚ã‚Šãƒ»è¶³å ´è‰¯å¥½ã€‚æµ·ä¸Šå…¬åœ’ãƒ«ãƒ¼ãƒ«é †å®ˆã€‚"
  },
  { id:"keihin-unkou-ryokudo", pref:"æ±äº¬éƒ½", city:"å“å·åŒº/å¤§ç”°åŒº", name:"äº¬æµœé‹æ²³ç·‘é“å…¬åœ’ï¼ˆè‡¨æµ·éƒ¨é‹æ²³è­·å²¸ï¼‰",
    address:"å“å·åŒºæ±æµ·ã€œå¤§ç”°åŒºå…«æ½®",
    map:"https://www.google.com/maps?q=%E4%BA%AC%E6%B5%9C%E9%81%8B%E6%B2%B3%E7%B7%91%E9%81%93%E5%85%AC%E5%9C%92",
    zones:[ {type:"è­·å²¸", fishes:["ã‚·ãƒ¼ãƒã‚¹","ã‚¯ãƒ­ãƒ€ã‚¤","ãƒã‚¼"]} ],
    methods:M_BASE_GOGAN,
    memo:"æŠ•ã’é‡£ã‚Šä¸å¯ã€‚æ²ç¤ºã®â€œé‡£ã‚Šå¯ã‚¨ãƒªã‚¢â€è¦ç¢ºèªã€‚"
  },
  { id:"harumibashi", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"æ˜¥æµ·æ©‹å…¬åœ’ï¼ˆã‚¬ã‚¹ã®ç§‘å­¦é¤¨å‰ã®é™å®šåŒºé–“ï¼‰",
    address:"æ±Ÿæ±åŒºè±Šæ´²2ã€œ3ä¸ç›®",
    map:"https://www.google.com/maps?q=%E6%98%A5%E6%B5%B7%E6%A9%8B%E5%85%AC%E5%9C%92+%E9%87%A3%E3%82%8A",
    zones:[ {type:"è­·å²¸", fishes:["ã‚·ãƒ¼ãƒã‚¹","ã‚¯ãƒ­ãƒ€ã‚¤","ãƒã‚¼","ã‚«ãƒ¬ã‚¤"]} ],
    methods:M_BASE_GOGAN,
    memo:"é‡£ã‚Šå¯ã¯ç´„150mã®ã¿ï¼æŠ•ã’ãƒ»æ’’ãé¤Œç¦æ­¢ã€‚"
  },
  { id:"shibaura-minami", pref:"æ±äº¬éƒ½", city:"æ¸¯åŒº", name:"èŠæµ¦å—ãµé ­å…¬åœ’ï¼ˆãƒ¬ã‚¤ãƒ³ãƒœãƒ¼ãƒ–ãƒªãƒƒã‚¸ä¸‹ï¼‰",
    address:"æ¸¯åŒºæ¸¯å—5ä¸ç›®",
    map:"https://www.google.com/maps?q=%E8%8A%9D%E6%B5%A6%E5%8D%97%E3%81%B5%E9%A0%AD%E5%85%AC%E5%9C%92",
    zones:[ {type:"è­·å²¸", fishes:["ã‚¢ã‚¸","ã‚³ãƒã‚·ãƒ­","ãƒã‚¼","ã‚·ãƒ¼ãƒã‚¹","ã‚¯ãƒ­ãƒ€ã‚¤"]} ],
    methods:M_BASE_GOGAN,
    memo:"æŠ•ã’ç¦æ­¢ãƒ»ãƒ«ã‚¢ãƒ¼åˆ¶é™ã®æ²ç¤ºã‚ã‚Šã€‚ç¾åœ°ãƒ«ãƒ¼ãƒ«å³å®ˆã€‚"
  },
  { id:"shinonome", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"æ±é›²æ°´è¾ºå…¬åœ’ï¼ˆé‹æ²³è­·å²¸ï¼‰",
    address:"æ±Ÿæ±åŒºæ±é›²1ä¸ç›®",
    map:"https://maps.google.com/?q=%E6%9D%B1%E9%9B%B2%E6%B0%B4%E8%BE%BA%E5%85%AC%E5%9C%92",
    zones:[ {type:"è­·å²¸", fishes:["ãƒã‚¼","ã‚·ãƒ¼ãƒã‚¹","ã‚«ãƒ¬ã‚¤","ãƒã‚¢ãƒŠã‚´"]} ],
    methods:M_BASE_GOGAN,
    memo:"é¢¨è£ã«ãªã‚Šã‚„ã™ã„ï¼ãƒˆã‚¤ãƒ¬ã‚ã‚Šãƒ»é§è»Šå ´ãªã—ã€‚"
  },
  { id:"sunamachi-canal", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"ç ‚ç”ºé‹æ²³ï¼ˆå¤¢ã®å³¶ç·‘é“å…¬åœ’å´ è­·å²¸ï¼‰",
    address:"æ±Ÿæ±åŒºå¤¢ã®å³¶3ä¸ç›®",
    map:"https://maps.google.com/?q=%E7%A0%82%E7%94%BA%E9%81%8B%E6%B2%B3+%E5%A4%A2%E3%81%AE%E5%B3%B6%E7%B7%91%E9%81%93%E5%85%AC%E5%9C%92",
    zones:[ {type:"è­·å²¸", fishes:["ã‚·ãƒ¼ãƒã‚¹"]} ],
    methods:M_BASE_GOGAN,
    memo:"æ–°æœ¨å ´è‡³è¿‘ã€‚å¤œé–“ã¯è¶³å…ƒãƒ»æ²»å®‰ã«æ³¨æ„ã€‚"
  },
  { id:"omori-hometown", pref:"æ±äº¬éƒ½", city:"å¤§ç”°åŒº", name:"å¤§æ£®ãµã‚‹ã•ã¨ã®æµœè¾ºå…¬åœ’ï¼ˆè­·å²¸ãƒ»ç£¯ï¼‰",
    address:"å¤§ç”°åŒºå¤§æ£®æ±2ä¸ç›®",
    map:"https://maps.google.com/?q=%E5%A4%A7%E6%A3%AE%E3%81%B5%E3%82%8B%E3%81%95%E3%81%A8%E3%81%AE%E6%B5%9C%E8%BE%BA%E5%85%AC%E5%9C%92",
    zones:[ {type:"è­·å²¸", fishes:["ãƒã‚¼","ã‚·ãƒ¼ãƒã‚¹"]}, {type:"ç£¯", fishes:["ãƒã‚¼","ã‚·ãƒ¼ãƒã‚¹"]} ],
    methods:M_BASE_GOGAN,
    memo:"ç ‚æµœã¯é‡£ã‚Šç¦æ­¢ï¼ä¸¡ç«¯ã®ç£¯ã‚„è­·å²¸ã®ã¿å¯ã€‚ãƒªãƒ¼ãƒ«æŠ•ã’ç¦æ­¢ã€‚"
  },

  /* æ±äº¬ï½œæ²³å£ä»˜è¿‘ */
  { id:"sunamachi-mizube", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"ç ‚ç”ºæ°´è¾ºå…¬åœ’ï¼ˆè’å·ä¸‹æµãƒ»æ±Ÿæ±åŒºå´ï¼‰",
    address:"æ±ç ‚7ã€œ8ä¸ç›®ï¼ˆè’å·æ²¿ã„ï¼‰",
    map:"https://maps.google.com/?q=%E7%A0%82%E7%94%BA%E6%B0%B4%E8%BE%BA%E5%85%AC%E5%9C%92",
    zones:[ {type:"æ²³å£ï¼ˆã‚´ãƒ­ã‚¿ï¼‰", fishes:["ãƒã‚¼","ã‚·ãƒ¼ãƒã‚¹","ã‚¯ãƒ­ãƒ€ã‚¤","ãƒœãƒ©"]} ],
    methods:M_BASE_ESTUARY,
    memo:"ã‚´ãƒ­ã‚¿ã§æ ¹æ›ã‹ã‚Šãƒ»æ»‘ã‚Šæ³¨æ„ï¼ãƒˆã‚¤ãƒ¬ç‚¹åœ¨ã€‚"
  },
  { id:"arakawa-estuary", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"è’å·æ²³å£ï¼ˆæ¸…ç ‚å¤§æ©‹ã€œæ–°ç ‚æ°´è¾ºå…¬åœ’ãƒ»æ–°ç ‚RSï¼‰",
    address:"æ¸…ç ‚ã€œæ–°ç ‚",
    map:"https://maps.google.com/?q=%E6%B8%85%E7%A0%82%E5%A4%A7%E6%A9%8B%20%E6%96%B0%E7%A0%82%E6%B0%B4%E8%BE%BA%E5%85%AC%E5%9C%92",
    zones:[ {type:"æ²³å£ï¼ˆã‚´ãƒ­ã‚¿ï¼‰", fishes:["ã‚·ãƒ¼ãƒã‚¹","ã‚¯ãƒ­ãƒ€ã‚¤","ãƒã‚¼"]} ],
    methods:M_BASE_ESTUARY,
    memo:"ã‚´ãƒ­ã‚¿è­·å²¸ã€‚æ½®ã®å‹•ãå‡ºã—ã¨æ©‹è„šæ˜æš—ãŒéµã€‚"
  },
  { id:"shinsuna-rs", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"æ¸…ç ‚å¤§æ©‹ä¸‹ã€œæ–°ç ‚ãƒªãƒãƒ¼ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³",
    address:"æ±Ÿæ±åŒºæ–°ç ‚1ã€œæ±ç ‚8",
    map:"https://www.google.com/maps?q=%E6%B8%85%E7%A0%82%E5%A4%A7%E6%A9%8B",
    zones:[ {type:"æ²³å£", fishes:["ã‚¯ãƒ­ãƒ€ã‚¤","ã‚·ãƒ¼ãƒã‚¹","ãƒã‚¼"]} ],
    methods:M_BASE_ESTUARY,
    memo:"ã‚«ãƒ‹é¤Œã®ãƒãƒ‹ãƒ³ã‚°å®Ÿç¸¾ï¼è¶³å ´ä¸å®‰å®šåŒºé–“ã‚ã‚Šã€‚"
  },
  { id:"old-edogawa-mouth", pref:"æ±äº¬éƒ½", city:"æ±Ÿæˆ¸å·åŒº", name:"æ—§æ±Ÿæˆ¸å· æ²³å£è¥¿å²¸ï¼ˆè‡¨æµ·ç”ºè­·å²¸ï¼‰",
    address:"æ±Ÿæˆ¸å·åŒºè‡¨æµ·ç”º6ä¸ç›®å‘¨è¾º",
    map:"https://www.google.com/maps?q=%E6%97%A7%E6%B1%9F%E6%88%B8%E5%B7%9D+%E6%B2%B3%E5%8F%A3+%E8%87%A8%E6%B5%B7%E7%94%BA",
    zones:[ {type:"æ²³å£", fishes:["ã‚·ãƒ¼ãƒã‚¹","ã‚µãƒƒãƒ‘","ãƒã‚¼","ã‚¯ãƒ­ãƒ€ã‚¤"]} ],
    methods:M_BASE_ESTUARY,
    memo:"æ©‹è„šãƒ»å¸¸å¤œç¯ã®æ˜æš—ãŒå¼·ã„ï¼ä¼‘æ—¥ã¯æ··é›‘ã€‚"
  },
  { id:"tamagawa-daishi", pref:"æ±äº¬éƒ½", city:"å¤§ç”°åŒº", name:"å¤šæ‘©å·ãƒ»å¤§å¸«æ©‹ã€œç¾½ç”°ï¼ˆæ±äº¬éƒ½å´ï¼‰",
    address:"å¤§å¸«æ©‹ã€œç¾½ç”°",
    map:"https://maps.google.com/?q=%E5%A4%9A%E6%91%A9%E5%B7%9D%20%E5%A4%A7%E5%B8%AB%E6%A9%8B",
    zones:[ {type:"æ²³å£/è­·å²¸", fishes:["ãƒã‚¼","ã‚»ã‚¤ã‚´","ãƒã‚´ãƒ"]} ],
    methods:M_BASE_ESTUARY,
    memo:"æº€å¹²å·®å¤§ã€‚æ©‹è„šãƒ¨ãƒ¬ãƒ»æ½®ä½å¤‰åŒ–ã‚’æ„è­˜ã€‚"
  },
  { id:"ebitorigawa", pref:"æ±äº¬éƒ½", city:"å¤§ç”°åŒº", name:"æµ·è€å–å·ï¼ˆå¼å¤©æ©‹ã€œå¤©ç©ºæ©‹å‘¨è¾ºï¼‰",
    address:"ç¾½ç”°5ã€œ6ä¸ç›®",
    map:"https://www.google.com/maps?q=%E6%B5%B7%E8%80%81%E5%8F%96%E5%B7%9D+%E5%BC%81%E5%A4%A9%E6%A9%8B",
    zones:[ {type:"æ²³å£", fishes:["ãƒã‚¼","ã‚»ã‚¤ã‚´","ã‚¯ãƒ­ãƒ€ã‚¤","ã‚¦ãƒŠã‚®"]} ],
    methods:M_BASE_ESTUARY,
    memo:"åˆæµç‚¹ãŒäººæ°—ã€‚æ‰‹ã™ã‚Šç„¡åŒºé–“ã‚ã‚Šï¼çœ‹æ¿ã«å¾“ã†ã€‚"
  },
  { id:"kandagawa-mouth", pref:"æ±äº¬éƒ½", city:"å°æ±åŒº/ä¸­å¤®åŒº", name:"ç¥ç”°å·æ²³å£ãƒ»æŸ³æ©‹ï¼ˆéš…ç”°å·åˆæµï¼‰",
    address:"å°æ±åŒºæŸ³æ©‹ã€œä¸­å¤®åŒºæ±æ—¥æœ¬æ©‹",
    map:"https://maps.google.com/?q=%E6%9F%B3%E6%A9%8B+%E7%A5%9E%E7%94%B0%E5%B7%9D",
    zones:[ {type:"æ²³å£", fishes:["ã‚·ãƒ¼ãƒã‚¹","ã‚«ãƒ¬ã‚¤","ã‚¦ãƒŠã‚®","ãƒã‚¼"]} ],
    methods:M_BASE_ESTUARY,
    memo:"å±‹å½¢èˆ¹ãƒ»éŠè¦§èˆ¹ã®èˆªè¡ŒãŒå¤šã„ã€‚å®‰å…¨æœ€å„ªå…ˆã€‚"
  },
  { id:"sunamachi-tennis", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"ç ‚ç”ºåº­çƒå ´å‰è­·å²¸ï¼ˆè’å·ãƒ»æ±ç ‚ï¼‰",
    address:"æ±Ÿæ±åŒºæ±ç ‚7ã€œ8ä¸ç›®",
    map:"https://maps.google.com/?q=%E7%A0%82%E7%94%BA%E5%BA%AD%E7%90%83%E5%A0%B4",
    zones:[ {type:"æ²³å£", fishes:["ã‚»ã‚¤ã‚´","ãƒã‚¼"]} ],
    methods:M_BASE_ESTUARY,
    memo:"è¶³å ´é«˜ãè½æ°´ãƒªã‚¹ã‚¯ï¼èµ¤ã‚¨ã‚¤æƒ…å ±ã‚ã‚Šã€‚"
  },

  /* æ±äº¬ï½œå·ãƒ»é‹æ²³ç­‰ */
  { id:"kyunakagawa", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº/æ±Ÿæˆ¸å·åŒº", name:"æ—§ä¸­å·ï¼ˆæ±å¤§å³¶é§…ã€œä¸­å·å¤§æ©‹ï¼‰",
    address:"æ±å¤§å³¶å‘¨è¾º",
    map:"https://maps.google.com/?q=%E6%97%A7%E4%B8%AD%E5%B7%9D%20%E6%9D%B1%E5%A4%A7%E5%B3%B6",
    zones:[ {type:"æ²³å·ï¼ˆã‚´ãƒ­ã‚¿/æ©‹è„šï¼‰", fishes:["ãƒã‚¼","ã‚»ã‚¤ã‚´"]} ],
    methods:M_BASE_RIVER,
    memo:"å¤ã€œåˆç§‹ã®ãƒ‡ã‚¤å¥½èª¿ã€‚ã‚´ãƒ­ã‚¿ã®çŸ³é–“ç‹™ã„ã‚‚ã€‚"
  },
  { id:"hirai-undo", pref:"æ±äº¬éƒ½", city:"æ±Ÿæˆ¸å·åŒº", name:"å¹³äº•é‹å‹•å…¬åœ’ï¼ˆè’å·å³å²¸Ã—æ—§ä¸­å·åˆæµåŸŸï¼‰",
    address:"æ±Ÿæˆ¸å·åŒºå¹³äº•è’å·ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰",
    map:"https://maps.google.com/?q=%E5%B9%B3%E4%BA%95%E9%81%8B%E5%8B%95%E5%85%AC%E5%9C%92%20%E8%8D%92%E5%B7%9D",
    zones:[ {type:"æ²³å·è­·å²¸/æ©‹è„š", fishes:["ã‚·ãƒ¼ãƒã‚¹","ãƒã‚¼","ã‚³ã‚¤","ã‚¦ãƒŠã‚®"]} ],
    methods:M_BASE_RIVER,
    memo:"æ²³å·æ•·Pã¯åœŸæ—¥ç¥ã®ã¿é–‹æ”¾ï¼ç°¡æ˜“ãƒˆã‚¤ãƒ¬ä¸­å¿ƒã€‚"
  },
  { id:"yokojikken", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"æ¨ªåé–“å·è¦ªæ°´å…¬åœ’ï¼ˆé‹æ²³ï¼‰",
    address:"å¤§å³¶ãƒ»åŒ—ç ‚å‘¨è¾º",
    map:"https://maps.google.com/?q=%E6%A8%AA%E5%8D%81%E9%96%93%E5%B7%9D%E8%A6%AA%E6%B0%B4%E5%85%AC%E5%9C%92",
    zones:[ {type:"é‹æ²³", fishes:["ãƒã‚¼","ãƒ†ãƒŠã‚¬ã‚¨ãƒ“"]} ],
    methods:M_BASE_RIVER,
    memo:"ãƒ•ã‚¡ãƒŸãƒªãƒ¼å‘ã‘ã€‚æ©‹å›ã‚Šã®é™°ã‚„è¶³å…ƒã®æ•·çŸ³ãŒç‹™ã„ç›®ã€‚"
  },
  { id:"mizumoto", pref:"æ±äº¬éƒ½", city:"è‘›é£¾åŒº", name:"æ°´å…ƒå…¬åœ’ï¼ˆæ·¡æ°´ï¼šæ± ãƒ»æ°´è·¯ï¼‰",
    address:"è‘›é£¾åŒº æ°´å…ƒå…¬åœ’",
    map:"https://maps.google.com/?q=%E6%B0%B4%E5%85%83%E5%85%AC%E5%9C%92",
    zones:[ {type:"æ± ãƒ»æ°´è·¯", fishes:["ã‚³ã‚¤","ãƒ•ãƒŠ","ãƒ˜ãƒ©ãƒ–ãƒŠ","ãƒ†ãƒŠã‚¬ã‚¨ãƒ“"]} ],
    methods:["ã‚¦ã‚­","ãƒŸãƒ£ã‚¯é‡£ã‚Š"],
    memo:"åœ’å†…é‡£ã‚Šå¯ï¼ˆä¸€éƒ¨æ–½è¨­é™¤ãï¼‰ï¼Pãƒ»ãƒˆã‚¤ãƒ¬å¤šæ•°ã€‚"
  },
  { id:"old-edogawa-shinozaki", pref:"æ±äº¬éƒ½", city:"æ±Ÿæˆ¸å·åŒº", name:"æ—§æ±Ÿæˆ¸å·ï¼ˆç¯ å´ç·‘åœ°Aã€œBï¼ç¯ å´æ°´é–€å‘¨è¾ºï¼‰",
    address:"ä¸Šç¯ å´ãƒ»ç¯ å´ç”º",
    map:"https://www.google.com/maps?q=%E7%AF%A0%E5%B4%8E%E7%B7%91%E5%9C%B0+%E6%97%A7%E6%B1%9F%E6%88%B8%E5%B7%9D",
    zones:[ {type:"æ²³å·", fishes:["ãƒã‚¼","ã‚·ãƒ¼ãƒã‚¹","ã‚¯ãƒ­ãƒ€ã‚¤","ã‚³ã‚¤"]} ],
    methods:M_BASE_RIVER,
    memo:"è½ã¡ãƒã‚¼æœŸâ—ã€‚é•·ã„è­·å²¸ã§åˆ†æ•£ã—ã‚„ã™ã„ã€‚"
  },
  { id:"arakawa-lockgate", pref:"æ±äº¬éƒ½", city:"æ±Ÿæˆ¸å·åŒº", name:"è’å·ãƒ­ãƒƒã‚¯ã‚²ãƒ¼ãƒˆï¼ˆæ—§ä¸­å·é€£çµ¡æ°´é–€ï¼‰",
    address:"å°æ¾å·1-1åœ°å…ˆ",
    map:"https://www.google.com/maps?q=%E8%8D%92%E5%B7%9D%E3%83%AD%E3%83%83%E3%82%AF%E3%82%B2%E3%83%BC%E3%83%88",
    zones:[ {type:"æ°´é–€/æ˜æš—", fishes:["ã‚·ãƒ¼ãƒã‚¹","ã‚¯ãƒ­ãƒ€ã‚¤","ãƒã‚¼"]} ],
    methods:M_BASE_RIVER,
    memo:"æ˜æš—ã¨åè»¢æµã‚’æ’ƒã¤ã€‚ãƒ•ã‚§ãƒ³ã‚¹ã‚ã‚Šã§è¶³å ´è‰¯ã€‚"
  },
  { id:"rokugo-sluice", pref:"æ±äº¬éƒ½", city:"å¤§ç”°åŒº", name:"å…­éƒ·æ°´é–€ï¼ˆå¤šæ‘©å·Ã—å‘‘å·åˆæµï¼‰",
    address:"ä»²å…­éƒ·4ä¸ç›®",
    map:"https://www.google.com/maps?q=%E5%85%AD%E9%83%B7%E6%B0%B4%E9%96%80",
    zones:[ {type:"æ°´é–€/åˆæµ", fishes:["ãƒã‚¼","ãƒ†ãƒŠã‚¬ã‚¨ãƒ“","ã‚»ã‚¤ã‚´","ã‚¯ãƒ­ãƒ€ã‚¤"]} ],
    methods:M_BASE_RIVER,
    memo:"æ­©è¡Œè€…ãƒ»è‡ªè»¢è»Šå¤šã‚ã€‚ã‚­ãƒ£ã‚¹ãƒˆè§’åº¦ã¯æ§ãˆã‚ã«ã€‚"
  },
  { id:"sumidagawa-terrace", pref:"æ±äº¬éƒ½", city:"ä¸­å¤®åŒº/æ±Ÿæ±åŒº", name:"éš…ç”°å·ãƒ†ãƒ©ã‚¹ï¼ˆæ–°å¤§æ©‹ã€œæ¸…æ´²æ©‹ å·¦å²¸ï¼‰",
    address:"æ–°å¤§æ©‹ã€œæ¸…æ´²æ©‹",
    map:"https://www.google.com/maps?q=%E9%9A%85%E7%94%B0%E5%B7%9D+%E6%96%B0%E5%A4%A7%E6%A9%8B",
    zones:[ {type:"ãƒ†ãƒ©ã‚¹", fishes:["ãƒã‚¼","ã‚·ãƒ¼ãƒã‚¹"]} ],
    methods:M_BASE_RIVER,
    memo:"ãƒ†ãƒ©ã‚¹ã¯æŠ•ã’è¾¼ã¿ä¸å¯ãŒåŸºæœ¬ã€‚å®‰å…¨æœ€å„ªå…ˆã§ã‚¢ãƒ³ãƒ€ãƒ¼ä¸»ä½“ã€‚"
  },
  { id:"onagigawa-clover", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"å°åæœ¨å· ã‚¯ãƒ­ãƒ¼ãƒãƒ¼æ©‹å‘¨è¾ºï¼ˆæ¨ªåé–“å·åˆæµéƒ¨ï¼‰",
    address:"æ‰‡æ©‹3ã€œçŒ¿æ±Ÿ2ä¸ç›®",
    map:"https://www.google.com/maps?q=%E5%B0%8F%E5%90%8D%E6%9C%A8%E5%B7%9D+%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%90%E3%83%BC%E6%A9%8B",
    zones:[ {type:"åˆæµéƒ¨", fishes:["ãƒã‚¼","ã‚»ã‚¤ã‚´"]} ],
    methods:M_BASE_RIVER,
    memo:"åˆæµéƒ¨ã®æ·€ã¿ã¨æ•·çŸ³ã®ã‚­ãƒ¯ãŒéµã€‚é§…è¿‘ã§è¶³å ´è‰¯ã€‚"
  },
  { id:"ogibashi-lock", pref:"æ±äº¬éƒ½", city:"æ±Ÿæ±åŒº", name:"æ‰‡æ©‹é–˜é–€ã€œæ–°æ‰‡æ©‹ï¼ˆå°åæœ¨å·ï¼‰",
    address:"æ±Ÿæ±åŒºæ‰‡æ©‹",
    map:"https://maps.google.com/?q=%E6%89%87%E6%A9%8B%E9%96%98%E9%96%80",
    zones:[ {type:"æ²³å·", fishes:["ãƒã‚¼"]} ],
    methods:M_BASE_RIVER,
    memo:"å†…éƒ¨æ²³å·ã§æµã‚Œç·©ã‚ï¼éŠæ­©é“åˆ©ç”¨è€…å¤šã„ã€‚"
  },
  { id:"horikiri-mizube", pref:"æ±äº¬éƒ½", city:"è‘›é£¾åŒº", name:"å €åˆ‡æ°´è¾ºå…¬åœ’ï¼ˆè’å·å·¦å²¸ãƒ»å €åˆ‡æ©‹å‘¨è¾ºï¼‰",
    address:"å €åˆ‡1ã€œ2ä¸ç›®",
    map:"https://maps.google.com/?q=%E5%A0%80%E5%88%87%E6%B0%B4%E8%BE%BA%E5%85%AC%E5%9C%92",
    zones:[ {type:"æ²³å·", fishes:["ã‚·ãƒ¼ãƒã‚¹","ãƒã‚´ãƒ","ã‚³ã‚¤","ã‚¿ã‚¤","ãƒã‚¼"]} ],
    methods:M_BASE_RIVER,
    memo:"é§…å¾’æ­©åœã€‚æ®µå·®ãƒ»æ»‘ã‚Šã«æ³¨æ„ã€‚"
  },
  { id:"kinegawa-bashi", pref:"æ±äº¬éƒ½", city:"è‘›é£¾åŒº", name:"æœ¨æ ¹å·æ©‹ï¼ˆè’å·ãƒ»ç¶¾ç€¬å·åˆæµï¼‰",
    address:"æ±å››ã¤æœ¨ä»˜è¿‘",
    map:"https://maps.google.com/?q=%E6%9C%A8%E6%A0%B9%E5%B7%9D%E6%A9%8B",
    zones:[ {type:"æ²³å·", fishes:["ã‚½ã‚¦ã‚®ãƒ§","ã‚³ã‚¤","ã‚·ãƒ¼ãƒã‚¹","ã‚¦ãƒŠã‚®"]} ],
    methods:M_BASE_RIVER,
    memo:"æµ…å ´å¤šãã€ã‚¦ã‚§ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é©æ‰€ã‚ã‚Šã€‚"
  },
  { id:"kitajukken-skytree", pref:"æ±äº¬éƒ½", city:"å¢¨ç”°åŒº", name:"åŒ—åé–“å·ï¼ˆæŠ¼ä¸Šãƒ»ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼å‰ï¼‰",
    address:"æŠ¼ä¸Š1ã€œ2ä¸ç›®",
    map:"https://maps.google.com/?q=%E5%8C%97%E5%8D%81%E9%96%93%E5%B7%9D+%E6%8A%BC%E4%B8%8A",
    zones:[ {type:"é‹æ²³", fishes:["ãƒã‚¼"]} ],
    methods:M_BASE_RIVER,
    memo:"ãƒ†ãƒ©ã‚¹ã§è¶³å ´è‰¯ã€‚å¤ã€œç§‹ã®ãƒ•ã‚¡ãƒŸãƒªãƒ¼å®šç•ªã€‚"
  },
  { id:"iwabuchi-sluice", pref:"æ±äº¬éƒ½", city:"åŒ—åŒº", name:"å²©æ·µæ°´é–€ï¼ˆæ—§å²©æ·µæ°´é–€ã€œä¸­ãƒå³¶ï¼‰",
    address:"åŒ—åŒºå²©æ·µç”º",
    map:"https://maps.google.com/?q=%E5%B2%A9%E6%B7%B5%E6%B0%B4%E9%96%80",
    zones:[ {type:"æ°´é–€/å³¶å‘¨ã‚Š", fishes:["ãƒ†ãƒŠã‚¬ã‚¨ãƒ“","ã‚·ãƒ¼ãƒã‚¹","ãƒã‚¼","ã‚¦ãƒŠã‚®","ã‚³ã‚¤"]} ],
    methods:M_BASE_RIVER,
    memo:"æ¡Ÿæ©‹ã‚„å³¶å‘¨ã‚Šã®åœ°å½¢å¤‰åŒ–ã‚’ç‹™ã†ã€‚æ»‘ã‚Šãƒ»è»¢è½æ³¨æ„ã€‚"
  },
  { id:"shinarakawa-ohashi", pref:"æ±äº¬éƒ½", city:"åŒ—åŒº/è¶³ç«‹åŒº", name:"æ–°è’å·å¤§æ©‹ï¼ˆåŒ—åŒºï¼è¶³ç«‹åŒºå¢ƒï¼‰",
    address:"åŒ—åŒºç¥è°·ã€œè¶³ç«‹åŒºæ–°ç”°",
    map:"https://maps.google.com/?q=%E6%96%B0%E8%8D%92%E5%B7%9D%E5%A4%A7%E6%A9%8B",
    zones:[ {type:"æ©‹è„š/æ²³å·", fishes:["ãƒ†ãƒŠã‚¬ã‚¨ãƒ“","ãƒã‚¼","ãƒãƒãƒ–","ã‚·ãƒ¼ãƒã‚¹"]} ],
    methods:M_BASE_RIVER,
    memo:"èˆ¹èˆ¶é€šè¡Œå¤šã„ã€‚ä»•æ›ã‘å›åã¯ã“ã¾ã‚ã«ã€‚"
  },
  { id:"shikahama-bashi", pref:"æ±äº¬éƒ½", city:"è¶³ç«‹åŒº", name:"é¹¿æµœæ©‹ï¼ˆè’å·ï¼‰",
    address:"è¶³ç«‹åŒºé¹¿æµœ",
    map:"https://maps.google.com/?q=%E9%B9%BF%E6%B5%9C%E6%A9%8B",
    zones:[ {type:"æ©‹è„š/æ²³å·", fishes:["ãƒã‚¼","ã‚·ãƒ¼ãƒã‚¹","ã‚¦ãƒŠã‚®"]} ],
    methods:M_BASE_RIVER,
    memo:"æ©‹è„šã®æ˜æš—ãŒåˆ†ã‹ã‚Œç›®ã€‚æ·±å¤œå¸¯ã¯ãƒãƒŠãƒ¼å¾¹åº•ã€‚"
  },

  /* æ±äº¬ï½œã‚µãƒ¼ãƒ• */
  { id:"kasai-kaisui", pref:"æ±äº¬éƒ½", city:"æ±Ÿæˆ¸å·åŒº", name:"è‘›è¥¿æµ·æµœå…¬åœ’ï¼ˆè¥¿ãªãã•ãƒ»å¤–æµ·å´ã®æŒ‡å®šåŒºé–“ï¼‰",
    address:"è‡¨æµ·ç”º6ä¸ç›®ä»˜è¿‘",
    map:"https://www.google.com/maps?q=%E8%91%9B%E8%A5%BF%E6%B5%B7%E6%B5%9C%E5%85%AC%E5%9C%92+%E8%A5%BF%E3%81%AA%E3%81%8E%E3%81%95",
    zones:[ {type:"ã‚µãƒ¼ãƒ•", fishes:["ãƒã‚¼","ã‚«ãƒ¬ã‚¤","ã‚·ãƒ¼ãƒã‚¹","ã‚¯ãƒ­ãƒ€ã‚¤"]} ],
    methods:M_BASE_SURF,
    memo:"é‡£ã‚Šå¯ã‚¨ãƒªã‚¢ã¯é™å®šï¼æŠ•ã’ãƒ»ãƒ•ãƒ«ã‚­ãƒ£ã‚¹ãƒˆä¸å¯ã€‚ã‚¢ãƒ³ãƒ€ãƒ¼ä¸»ä½“ã§å®‰å…¨ç¬¬ä¸€ã€‚"
  }
];

/* éƒ½é“åºœçœŒä¸€è¦§ */
const PREFS = [...new Set(DB.map(p=>p.pref))];

/* ===== çŠ¶æ…‹ & ã‚¹ãƒ†ãƒƒãƒ— ===== */
const state = { step:0, pref:null, placeId:null, zoneIdx:null, fish:null, subMethod:null };
const stepsTitle = ["éƒ½é“åºœçœŒ","é‡£ã‚Šå ´","ãƒã‚¤ãƒ³ãƒˆç¨®åˆ¥","é­šç¨®","çµæœ"];

function setSteps(){
  const s = document.getElementById('steps');
  s.innerHTML = stepsTitle.map((t,i)=>`<div class="step ${i<=state.step?'on':''}">${i+1}. ${t}</div>`).join('');
  document.getElementById('back').hidden = state.step===0;
}

/* ===== æç”» ===== */
function render(){
  setSteps();
  const app = document.getElementById('app');

  // 0: éƒ½é“åºœçœŒ
  if(state.step===0){
    app.innerHTML = `<div class="hero"><strong>éƒ½é“åºœçœŒ</strong> ã‚’é¸ã¶ã¨ã€ãã®åœ°åŸŸã®é‡£ã‚Šå ´ãŒå‡ºã¾ã™ã€‚</div>
    <div class="grid">
      ${PREFS.map(p=>{
        const n = DB.filter(d=>d.pref===p).length;
        return `<div class="card">
          <h3>${p}</h3>
          <p class="muted">${n} ã‚¹ãƒãƒƒãƒˆ</p>
          <div class="row"><button class="pri" onclick="selPref('${p}')">ã“ã®éƒ½é“åºœçœŒã‚’é¸ã¶</button></div>
        </div>`}).join('')}
    </div>`;
    return;
  }

  // 1: é‡£ã‚Šå ´ï¼ˆâ˜…ãƒ¡ãƒ¢ï¼†é‡£æœä¾‹ã‚’è¿½åŠ è¡¨ç¤ºï¼‰
  if(state.step===1){
    const list = DB.filter(d=>d.pref===state.pref);
    app.innerHTML = `<div class="grid">
      ${list.map(d=>{
        const fishes = [...new Set((d.zones||[]).flatMap(z=>z.fishes))].slice(0,8).join("ã€");
        return `<div class="card">
          <h3>${d.name}</h3>
          <div class="kv"><span>${d.pref} ${d.city||""}</span><span>${d.address||""}</span></div>
          <p class="muted">é‡£æœä¾‹ï¼š${fishes||'â€”'}</p>
          ${d.memo?`<div class="memo">ä¸€å£ãƒ¡ãƒ¢ãƒ»æ³¨æ„äº‹é …ï¼š${d.memo}</div>`:''}
          <div class="row" style="margin-top:8px">
            <button class="ghost" onclick="openMap('${d.id}')">åœ°å›³ã‚’é–‹ã</button>
            <button class="pri" onclick="selPlace('${d.id}')">ã“ã“ã‚’é¸ã¶</button>
          </div>
        </div>`}).join('')}
    </div>`;
    return;
  }

  // 2: ãƒã‚¤ãƒ³ãƒˆç¨®åˆ¥
  if(state.step===2){
    const p = getPlace();
    app.innerHTML = `
      <div class="card">
        <h3>${p.name}ï½œãƒã‚¤ãƒ³ãƒˆã‚’é¸ã¶</h3>
        <div class="chips">
          ${p.zones.map((z,idx)=>`<button class="chip" onclick="selZone(${idx})">${z.type}</button>`).join('')}
        </div>
      </div>`;
    return;
  }

  // 3: é­šç¨®
  if(state.step===3){
    const z = getZone();
    app.innerHTML = `
      <div class="card">
        <h3>${getPlace().name}ï½œ${z.type}ï½œé­šç¨®ã‚’é¸ã¶</h3>
        <div class="chips">
          ${z.fishes.map(f=>`<button class="chip" onclick="selFish('${f}')">${f}</button>`).join('')}
        </div>
      </div>`;
    return;
  }

  // 4: çµæœï¼ˆâ˜…ç¾åœ°ãƒ«ãƒ¼ãƒ«ã¯è¡¨ç¤ºã—ãªã„ï¼‰
  if(state.step===4){
    app.innerHTML = renderResult();
    return;
  }
}

function renderResult(){
  const p = getPlace(), z = getZone(), f = state.fish;
  const info = book(f);
  const placeMethods = (p.methods||[]);
  const allowed = (info.methods||[]).filter(m => placeMethods.includes(m));
  if(!state.subMethod) state.subMethod = allowed[0] || null;

  const fimg = fishImg(f);
  const rimg = rigImg(f, state.subMethod);

  const params = `
    <div class="params">
      <div class="param"><b>ã‚·ãƒ¼ã‚ºãƒ³</b> ${info.season||"â€”"}</div>
      <div class="param"><b>æ™‚é–“å¸¯</b> ${info.time||"â€”"}</div>
    </div>`;

  const methodChips = `
    <div class="chips method-chips">
      ${allowed.map(m=>`<button class="chip ${m===state.subMethod?'on':''}" onclick="pickMethod('${m}')">${m}</button>`).join('') || '<p class="muted">ã“ã®å ´æ‰€ã§æ¨å¥¨ã•ã‚Œã‚‹é‡£æ³•ãƒ‡ãƒ¼ã‚¿ãŒæœªè¨­å®šã§ã™</p>'}
    </div>`;

  const gearWords = new Set([...(info.gear||[])]);
  (METHOD_GEAR[state.subMethod]||[]).forEach(w=>gearWords.add(w));
  const gearList = [...gearWords].slice(0,6);

  const baitWords = new Set([...(info.bait||[])]);
  (BAIT_BY_METHOD[state.subMethod]||[]).forEach(w=>baitWords.add(w));
  const baitList = [...baitWords];

  const lureList = info.lures||[];

  return `
  <div class="card">
    <div class="sectionTitle">æŒ‡å®šã—ãŸé­šç”»åƒ â†“</div>
    <img class="banner" src="${fimg}" alt="${f}" onerror="this.onerror=null;this.src='${FISH_IMG_FALLBACK}';">

    <div class="sectionTitle">ä»•æ›ã‘ã‚¤ãƒ©ã‚¹ãƒˆ â†“</div>
    <img class="banner" src="${rimg.specific}" alt="${state.subMethod||''} rig"
         onerror="if(this.src.indexOf('rig-')>-1){this.src='${rimg.generic}';this.onerror=function(){this.src='${rimg.placeholder}';}}">

    <h3 style="margin-top:10px">${p.name}</h3>
    <div class="kv"><span>${z.type}</span><span>é­šç¨®ï¼š${f}</span></div>
    ${params}

    <div class="sectionTitle">ã“ã®å ´æ‰€ã§ã®æ¨å¥¨é‡£ã‚Šæ–¹ï¼ˆåˆ‡ã‚Šæ›¿ãˆå¯ï¼‰</div>
    ${methodChips}

    <div class="sectionTitle">ã‚ªã‚¹ã‚¹ãƒ¡éƒ¨æ â†“</div>
    ${gearList.length?`<ul class="items">
      ${gearList.map(w=>`<li>${w}
        <div class="shops">
          <a class="shop" href="#" onclick="ext('${linkAmazon(w)}')">Amazon</a>
          <a class="shop" href="#" onclick="ext('${linkRakuten(w)}')">æ¥½å¤©</a>
        </div>
      </li>`).join('')}
    </ul>`:'<p class="muted">æº–å‚™ä¸­</p>'}

    <div class="sectionTitle">é¤Œãƒ»æ’’ãé¤Œã®ã‚ªã‚¹ã‚¹ãƒ¡ â†“</div>
    ${baitList.length?`<ul class="items">
      ${baitList.map(w=>`<li>${w}
        <div class="shops">
          <a class="shop" href="#" onclick="ext('${linkAmazon(w)}')">Amazon</a>
          <a class="shop" href="#" onclick="ext('${linkRakuten(w)}')">æ¥½å¤©</a>
        </div>
      </li>`).join('')}
    </ul>`:'<p class="muted">æº–å‚™ä¸­</p>'}

    ${lureList.length?`<div class="sectionTitle">ãƒ«ã‚¢ãƒ¼å€™è£œ â†“</div>
      <ul class="items">
        ${lureList.map(w=>`<li>${w}
          <div class="shops">
            <a class="shop" href="#" onclick="ext('${linkAmazon(w)}')">Amazon</a>
            <a class="shop" href="#" onclick="ext('${linkRakuten(w)}')">æ¥½å¤©</a>
          </div>
        </li>`).join('')}
      </ul>`:''}

    <div class="sectionTitle">æ£šã€ç‹™ã„ç›® â†“</div>
    <p>${(book(f).shelf)||p.shelf||'â€”'}</p>

    <div class="sectionTitle">ãŠã™ã™ã‚æ™‚é–“å¸¯ â†“</div>
    <p>${(book(f).time)||p.times||'â€”'}</p>

    <div class="sectionTitle">å ´æ‰€ã¨å‹ã ã¡å…±æœ‰</div>
    <div class="row" style="margin-top:6px">
      <button class="ghost" onclick="openMap('${p.id}')">å ´æ‰€ã‚’åœ°å›³ã§ç¢ºèª</button>
      <button class="pri" onclick="share()">å‹ã ã¡ã«å…±æœ‰</button>
    </div>

    <p class="cap">é£Ÿã¹æ–¹ãƒ’ãƒ³ãƒˆï¼š${(book(f).food)||'â€”'}</p>
  </div>`;
}

/* ===== ãƒãƒ³ãƒ‰ãƒ© ===== */
function getPlace(){ return DB.find(p=>p.id===state.placeId); }
function getZone(){ const p = getPlace(); return p?.zones?.[state.zoneIdx]; }
function openWin(url){ return liff.isInClient()? liff.openWindow({url, external:true}) : window.open(url,'_blank'); }
function openMap(pid){ const url = DB.find(p=>p.id===pid).map; openWin(url); }
function ext(url){ openWin(url); }

function selPref(p){ state.pref=p; state.step=1; render(); }
function selPlace(id){ state.placeId=id; state.step=2; render(); }
function selZone(idx){ state.zoneIdx=idx; state.step=3; render(); }
function selFish(f){ state.fish=f; state.subMethod=null; state.step=4; render(); }
function pickMethod(m){ state.subMethod=m; document.getElementById('app').innerHTML = renderResult(); }

function goBack(){
  if(state.step===0) return;
  if(state.step===1){ state.pref=null; }
  if(state.step===2){ state.placeId=null; }
  if(state.step===3){ state.zoneIdx=null; }
  if(state.step===4){ state.fish=null; state.subMethod=null; }
  state.step--; render();
}

/* ===== LIFF èµ·å‹• ===== */
(async()=>{
  await liff.init({ liffId: LIFF_ID });
  if (liff.isInClient()){
    if(!liff.isLoggedIn()){ liff.login({ prompt:"consent" }); return; }
    try{
      const p = await liff.getProfile();
      document.getElementById('hello').textContent = `ã‚ˆã†ã“ã ${p.displayName} ã•ã‚“`;
    }catch{ document.getElementById('hello').textContent = "ã‚ˆã†ã“ãï¼"; }
  }else{
    document.getElementById('hello').textContent = "ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­";
  }
  render();
})();

async function share(){
  if(!liff.isInClient()){ alert('å…±æœ‰ã¯LINEã‚¢ãƒ—ãƒªå†…ã§é–‹ã„ã¦ãã ã•ã„'); return; }
  const p = getPlace(), z = getZone();
  const f = state.fish, m = state.subMethod||'';
  const b = book(f);
  const msg = `${p.name}\n${z.type}\n${f}${m?` Ã— ${m}`:''}\nå­£ç¯€:${b.season||'-'}ï¼æ™‚é–“å¸¯:${b.time||'-'}\næ£š:${b.shelf||p.shelf||'-'}\nåœ°å›³:${p.map}`;
  await liff.shareTargetPicker([{ type:'text', text: msg }]);
}
</script>
</body>
</html>
